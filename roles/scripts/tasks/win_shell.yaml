# - name: Create script content from file
#   set_fact:
#     script_to_run: "{{ lookup( 'file', script ) }}"

- name: Copy script to host
  ansible.windows.win_copy:
    src: "{{ script }}"
    dest: c:\temp\

- name: Run script on host
  ansible.windows.win_shell: c:\temp\{{ script }} {{ param }}
  register: output

- name: Script output 
  ansible.builtin.debug:
    var: output.stdout_lines
    
- name: Script error
  ansible.builtin.debug:
    var: output.stderr


- name: Clean up script
  ansible.windows.win_file:
    path: c:\temp\{{ script }}
    state: absent